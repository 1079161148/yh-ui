@use 'sass:map';
@use '@yh-ui/theme/styles/mixins/mixins' as *;

@include b(time-select) {
  --yh-time-select-height: var(--yh-component-size-default, 32px);
  --yh-time-select-font-size: var(--yh-font-size-base, 14px);
  --yh-time-select-icon-size: 14px;
  --yh-time-select-prefix-margin: 12px;
  --yh-time-select-display-padding: 38px;

  position: relative;
  display: inline-flex;
  width: 100%;
  cursor: pointer;

  @include e(wrapper) {
    position: relative;
    display: flex;
    align-items: center;
    width: 100%;
    height: var(--yh-time-select-height);
    font-size: var(--yh-time-select-font-size);
    background-color: var(--yh-fill-color-blank, #fff);
    border: 1px solid var(--yh-border-color, #dcdfe6);
    border-radius: var(--yh-radius-base, 4px);
    transition: var(--yh-transition-base, all 0.2s ease);
    box-sizing: border-box;

    &:hover {
      border-color: var(--yh-border-color-hover, #c0c4cc);
    }
  }

  @include e(prefix) {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    color: var(--yh-text-color-placeholder, #a8abb2);
    margin-right: 8px;
    margin-left: var(--yh-time-select-prefix-margin);
    font-size: var(--yh-time-select-icon-size);
  }

  @include e(inner) {
    flex: 1;
    width: 0;
    border: none;
    outline: none;
    background: transparent;
    color: var(--yh-text-color-primary, #303133);
    font-size: inherit;
    padding: 0;
    cursor: inherit;

    &::placeholder {
      color: var(--yh-text-color-placeholder, #a8abb2);
    }
  }

  @include e(display-value) {
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    display: flex;
    align-items: center;
    padding-left: var(--yh-time-select-display-padding);
    color: var(--yh-text-color-primary, #303133);
    font-size: inherit;
    pointer-events: none;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  @include e(suffix) {
    display: inline-flex;
    align-items: center;
    flex-shrink: 0;
    margin-right: 8px;
    gap: 4px;
  }

  @include e(icon) {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    color: var(--yh-text-color-placeholder, #a8abb2);
    transition: var(--yh-transition-fast, all 0.15s ease);
    font-size: var(--yh-time-select-icon-size);

    svg {
      width: 1em;
      height: 1em;
    }
  }

  @include e(clear) {
    cursor: pointer;

    &:hover {
      color: var(--yh-text-color-secondary, #909399);
    }
  }

  @include e(arrow) {
    transition: transform var(--yh-duration-base, 0.2s) ease;

    @include when(reverse) {
      transform: rotate(180deg);
    }
  }

  @include e(dropdown) {
    position: absolute;
    z-index: var(--yh-z-index-popper, 2000);
    background-color: var(--yh-fill-color-blank, #fff);
    border: 1px solid var(--yh-border-color-light, #e4e7ed);
    border-radius: var(--yh-radius-base, 4px);
    box-shadow: var(--yh-shadow-lg);
    overflow: hidden;
  }

  @include e(options) {
    max-height: 274px;
    overflow-y: auto;
    padding: 4px 0;
  }

  @include e(option) {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 12px;
    height: 34px;
    line-height: 34px;
    font-size: 14px;
    color: var(--yh-text-color-regular, #606266);
    cursor: pointer;
    transition: background-color var(--yh-duration-fast) ease;

    &:hover,
    &.is-hovering {
      background-color: var(--yh-fill-color-light, #f5f7fa);
    }

    @include when(selected) {
      color: var(--yh-color-white, #ffffff);
      background-color: var(--yh-color-primary, #409eff);
      font-weight: 700;
    }

    @include when(disabled) {
      color: var(--yh-text-color-disabled, #c0c4cc);
      cursor: not-allowed;

      &:hover {
        background-color: transparent;
      }
    }
  }

  @include e(option-check) {
    display: inline-flex;
    align-items: center;
    color: inherit;
    margin-left: 8px;

    svg {
      width: 14px;
      height: 14px;
    }
  }

  @include e(empty) {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100px;
    font-size: 14px;
    color: var(--yh-text-color-placeholder, #a8abb2);
  }

  /* 尺寸变体 - 通过变量继承解决 BEM 嵌套导致的 at-root 丢失上下文问题 */
  @include m(large) {
    --yh-time-select-height: var(--yh-component-size-large, 40px);
    --yh-time-select-font-size: var(--yh-font-size-base, 14px);
    --yh-time-select-icon-size: 16px;
    --yh-time-select-display-padding: 42px;
  }

  @include m(small) {
    --yh-time-select-height: var(--yh-component-size-small, 24px);
    --yh-time-select-font-size: var(--yh-font-size-xs, 12px);
    --yh-time-select-icon-size: 12px;
    --yh-time-select-prefix-margin: 8px;
    --yh-time-select-display-padding: 30px;
  }

  @include when(focused) {
    .yh-time-select__wrapper {
      border-color: var(--yh-color-primary);
      box-shadow: 0 0 0 2px var(--yh-color-primary-light-8);
    }
  }

  @include when(disabled) {
    cursor: not-allowed;

    .yh-time-select__wrapper {
      background-color: var(--yh-fill-color-light);
      border-color: var(--yh-border-color-light);
      color: var(--yh-text-color-disabled);
      cursor: not-allowed;

      &:hover {
        border-color: var(--yh-border-color-light);
      }
    }

    .yh-time-select__inner {
      color: var(--yh-text-color-disabled);
      cursor: not-allowed;
    }

    .yh-time-select__display-value {
      color: var(--yh-text-color-disabled);
    }
  }
}
